<ion-view view-title="Novo Remédio">

  <ion-nav-buttons side="primary">
    <button class="button button-clear" ng-click="cancelCreate()">Cancelar</button>
  </ion-nav-buttons>

  <ion-nav-buttons side="secondary">
    <button class="button button-clear"
            type="submit"
            form="createMedicamentForm">Salvar</button>
  </ion-nav-buttons>

  <ion-content>
    <!--Form with floating labels-->
    <form name="createMedicamentForm"
          novalidate=""
          ng-submit="addMedicament(createMedicamentForm)"
          class="create-form"
          id="createMedicamentForm">

      <ion-list >

        <div class="row row-center">
          <div class="col" style="display: flex; align-items: center; justify-content: center;" ng-click="addPicture()">

            <!-- Add Photo -->
            <div class="color-mfblue" ng-show="!picture" style="height:45vw; display: flex; align-items: center;">
              adicionar foto
            </div>

            <!-- Photo -->
            <div class="" ng-show="picture">
              <div class="picture">
                <img ng-src="data:image/jpeg;base64,{{picture}}" alt="" style="height:45vw;"/>
              </div >
            </div>
          </div>
          <div class="col">
            <!-- Medicament Name -->
            <label class="item item-input item-stacked-label"
                   ng-class="{'has-error':createMedicamentForm.name.$invalid}"
                   style="padding: 6px 0 5px 10px">
              <input type="text"
                     placeholder="Nome"
                     name="name"
                     ng-model="formData.name"
                     ng-required="true"
                     ng-minlength="2"
                     class="text-center color-mfblue">
            </label >
            <div class="form-errors"
                 ng-messages="createMedicamentForm.name.$error">
              <div ng-messages-include="templates/form-errors.html"> </div>
              <div class="form-error"
                   ng-message="minlength" >Por favor, insira um nome válido.
              </div >
            </div>
            <br>
            <!-- Expiration Date -->
            <label class="item item-input item-stacked-label" style="padding: 6px 0 5px 10px">
              <input type="text"
                     placeholder="Data de Validade"
                     name="expirationDate"
                     ng-model="medicament.expirationDate | date:'dd/MM/yyyy'"
                     class="text-center color-mfblue"
                     ng-click="openDatePicker()">
            </label>

          </div>
        </div>

        <!-- Category -->
        <label class="item item-icon-right assertive"
               ng-click=""
               ui-sref="categoryList">
          Categoria
          <span class="item-note color-mfblue">
            {{category.name}}
          </span>
          <i class="icon ion-ios-arrow-forward" style="color: lightgray;  font-size: 22px"></i>
        </label>

        <!-- Intervalo -->
        <label class="item item-input item-select">
          <div class="input-label assertive">
            Intervalo
          </div>
          <select class="color-mfblue">
            <option>1 hora</option>
            <option selected>2 horas</option>
            <option>3 hora(s)</option>
            <option>4 hora(s)</option>
            <option>6 hora(s)</option>
            <option>8 hora(s)</option>
            <option>12 hora(s)</option>
            <option>24 hora(s)</option>
          </select>
        </label>

        <!-- Farmácia -->
        <label class="item item-icon-right assertive">
          Farmácia
          <i class="icon ion-ios-arrow-forward" style="color: lightgray; font-size: 22px"></i>
        </label>


        <!-- Local -->
        <label class="item assertive"
               ng-click="toggleGroup(groups[2])"
               ng-class="{active: isGroupShown(groups[2])}">
          Local
          <span class="item-note color-mfblue"> {{ formData.place }} </span>
        </label>
        <div class="item-accordion"
             ng-show="isGroupShown(groups[2])">

          <div class="row">
            <div class="col col-80 col-center item-input-inset">
              <select class="assertive item-input-wrapper"
                      style=" height: 29px; padding-left: 4px; width: 100%; border:0"
                      ng-model="formData.place"
                      ng-change="toggleGroup(groups[2])">
                <option>Caixa</option>
                <option>Casa</option>
                <option>Escritório</option>
              </select>
            </div>
            <a class="col button button-icon icon ion-ios-plus-outline assertive"></a>
          </div>
        </div>
        </div>


        <!-- Quantidade -->
        <label class="item assertive"
               ng-click="toggleGroup(groups[0])"
               ng-class="{active: isGroupShown(groups[0])}">
          Quantidade
          <span class="item-note color-mfblue"> {{ formData.quantity }} {{ formData.doseType }}</span>
        </label>
        <div class="item-accordion"
             ng-show="isGroupShown(groups[0])">

          <div class="row">
            <div class="col item-input-inset">
              <label class="item-input-wrapper">
                <input type="text" placeholder="" ng-model="formData.quantity">
              </label>

            </div>
            <div class="col">
              <div class=" button-bar">
                <a class="button button-outline button-assertive segmented-collapsed"
                   ng-click="formData.doseType='cp'"
                   ng-class="{active: formData.doseType =='cp'}">cp</a>
                <a class="button button-outline button-assertive segmented-collapsed"
                   ng-click="formData.doseType='g'"
                   ng-class="{active: formData.doseType =='g'}">g</a>
                <a class="button button-outline button-assertive segmented-collapsed"
                   ng-click="formData.doseType='ml'"
                   ng-class="{active: formData.doseType =='ml'}">ml</a>
              </div>
            </div>
          </div>
        </div>

        <!-- Dose -->
        <label class="item assertive"
               ng-click="toggleGroup(groups[1])"
               ng-class="{active: isGroupShown(groups[1])}">
          Dose
          <span class="item-note color-mfblue"> {{ formData.dose }} {{ formData.doseType }}</span>
        </label>
        <div class="item-accordion"
             ng-show="isGroupShown(groups[1])">

          <div class="row">
            <div class="col item-input-inset">
              <label class="item-input-wrapper">
                <input type="text" placeholder="" ng-model="formData.dose">
              </label>

            </div>
            <div class="col">
              <div class=" button-bar">
                <a class="button button-outline button-assertive segmented-collapsed"
                   ng-click="formData.doseType='cp'"
                   ng-class="{active: formData.doseType =='cp'}">cp</a>
                <a class="button button-outline button-assertive segmented-collapsed"
                   ng-click="formData.doseType='g'"
                   ng-class="{active: formData.doseType =='g'}">g</a>
                <a class="button button-outline button-assertive segmented-collapsed"
                   ng-click="formData.doseType='ml'"
                   ng-class="{active: formData.doseType =='ml'}">ml</a>
              </div>
            </div>
          </div>
        </div>

        <!-- Preço -->
        <label class="item item-input">
          <div class="row" style="padding-left: 0px">
            <span class="col col-50 input-label assertive" style="padding-left: 0px; ">Preço</span>
            <span class="col color-mfblue" style="text-align: right; ">R$</span>
            <input ng-model="formData.price" class="col col-30 color-mfblue" type="text" style="text-align: right;">
          </div>
        </label>

        <!-- Alert -->
        <div class="item item-toggle assertive">
          Alerta
          <label class="toggle toggle-assertive">
            <input type="checkbox">
            <div class="track">
              <div class="handle"></div>
            </div>
          </label>
        </div>

        <!-- Receipt -->
        <label class="item item-icon-right assertive">
          Receita
          <i class="icon ion-checkmark assertive" style="font-size: 16px"></i>
        </label>

        <!-- Notes -->
        <label class="item item-input">
          <span class="input-label assertive" style="width: 20%">Notas</span>
          <label class="item-input" style="width: 75%">
            <textarea class="color-mfblue" placeholder="Informações gerais" style="min-height: 100px;"></textarea>
          </label>
        </label>

      </ion-list>

    </form>

  </ion-content>
</ion-view>
